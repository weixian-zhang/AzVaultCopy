from azure.identity import AzureCliCredential
from azcred import ExistingTokenCredential

# login to 2 tenants
# https://learn.microsoft.com/en-us/answers/questions/1319805/azure-python-sdk-athenticate-to-multiple-tenants-i
# get access token akv scope
# az account get-access-token --scope https://vault.azure.net/.default --query "accessToken"
class Config:

    def __init__(self) -> None:
        self.src_token = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ikg5bmo1QU9Tc3dNcGhnMVNGeDdqYVYtbEI5dyIsImtpZCI6Ikg5bmo1QU9Tc3dNcGhnMVNGeDdqYVYtbEI5dyJ9.eyJhdWQiOiJjZmE4YjMzOS04MmEyLTQ3MWEtYTNjOS0wZmMwYmU3YTQwOTMiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8xNmIzYzAxMy1kMzAwLTQ2OGQtYWM2NC03ZWRhMDgyMGI2ZDMvIiwiaWF0IjoxNzI2MTEyMzk5LCJuYmYiOjE3MjYxMTIzOTksImV4cCI6MTcyNjExNzY3MiwiYWNyIjoiMSIsImFpbyI6IkFaUUFhLzhYQUFBQVJvWWZLb1pzbFJZMW96RWMvZHBjQmxRelRYd2VoTGpaeG5lQTBZZ1ZhVnZKZW1QY2pDdXduR2hlQ0sxVTZQemUyV2JoMmVsa2NTdmc0WkZHT2p0YzkwdzBrNDRDaGhGb2FXcnRLZ1JYcHR5OWlqNURUbURERGFaL0UzNG4vZ2JRMXpCbVdBMjFEbG9vakxhSDA1Uk9NVGp1M05FMk5Xek0vd0Q0Y1V4UVgyM01OSXZiRTJERHZ1bzlaMHZXMm5xQSIsImFsdHNlY2lkIjoiNTo6MTAwMzIwMDAyQjNDQzkyMiIsImFtciI6WyJyc2EiLCJtZmEiXSwiYXBwaWQiOiIwNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDYiLCJhcHBpZGFjciI6IjAiLCJkZXZpY2VpZCI6ImZhMGFjZGRlLTI5NGYtNDllMC05MzhlLWFmOGFlYTExNDE5OCIsImVtYWlsIjoiV2VpeGlhbi56aGFuZ0BtaWNyb3NvZnQuY29tIiwiZmFtaWx5X25hbWUiOiJaaGFuZyIsImdpdmVuX25hbWUiOiJXZWl4aWFuIiwiZ3JvdXBzIjpbImIxMzA0MDIyLTA4ZTYtNDQ3ZC1iMDk0LTE1MzcwNTk3YzZiNiIsImQzNGM0ZWJlLTQ5ODQtNDkwMy1hNjRkLThjMjAyODNkNTE2YiIsImU3M2YyNGNlLTljMmQtNDI5OS05Yjk2LWFlZjg0ZmNlMjJkNyIsImUzMDk2ZGY3LWI2NWMtNGUzMi1hYjFhLTdhMzVkYzY4NGYwYSJdLCJob21lX29pZCI6IjQ2NGY1NjcyLWM4NGUtNDNlNS05ZTM4LWY2M2FkNzY0OWU4MCIsImlkcCI6Imh0dHBzOi8vc3RzLndpbmRvd3MubmV0LzcyZjk4OGJmLTg2ZjEtNDFhZi05MWFiLTJkN2NkMDExZGI0Ny8iLCJpZHR5cCI6InVzZXIiLCJpcGFkZHIiOiIyNDAwOmQ4MDI6MmRkYzpiNDAwOmY4NGU6MjUzODo4YjIwOjc2ZDUiLCJuYW1lIjoiV2VpeGlhbiBaaGFuZyIsIm9pZCI6IjU3N2YxOTdkLTlkODMtNDBhMy04NjE3LTBhYTYyNzI3Njc1NiIsInB1aWQiOiIxMDAzMjAwMjY0ODRDOUIwIiwicHdkX3VybCI6Imh0dHBzOi8vcG9ydGFsLm1pY3Jvc29mdG9ubGluZS5jb20vQ2hhbmdlUGFzc3dvcmQuYXNweCIsInJoIjoiMC5BVVlBRThDekZnRFRqVWFzWkg3YUNDQzIwem16cU0taWdocEhvOGtQd0w1NlFKUHhBRWMuIiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoia0RPa3dUQ1J2MGVaWGRNV3Y2X1g2TTRIZFE2M0lSdnZtam5rcXMtRTZzNCIsInRpZCI6IjE2YjNjMDEzLWQzMDAtNDY4ZC1hYzY0LTdlZGEwODIwYjZkMyIsInVuaXF1ZV9uYW1lIjoiV2VpeGlhbi56aGFuZ0BtaWNyb3NvZnQuY29tIiwidXRpIjoiMUVRUmRHaGc5a0thRFFWNXBlWWtBQSIsInZlciI6IjEuMCIsIndpZHMiOlsiYjc5ZmJmNGQtM2VmOS00Njg5LTgxNDMtNzZiMTk0ZTg1NTA5Il0sInhtc19jYyI6WyJDUDEiXSwieG1zX2lkcmVsIjoiMSA0In0.UmsxqEe5MSXBtL4mStJbp_9JHPeq5L_dtgDK1R3xeJtnzUhCXBiJtLiVthaCenPt70gy-Kd07UTTpQ3BPQ7Qw-j7U-VEJnVopbs1_1kY3YxVmbYWTCLA-4tHMXqGhw0aoJr7pCKVToVYhorTnSVHL9x1RwsL_wy3gQTmCRTWhlqPA-GrAXhpHzz8aysRHQNZ8KdOFq3NKUxc6bBqeVVEu_IZU_vW3TM4X_qthXU39pFUbq33Wi6CtfPKuMfT13eS7Z0pGznWoqELn8aHLXEhbWWPKp8UAIeIYaDwGoKLPOgFA6Yb-8lWzClfElGlwS3nD7VdH_LIJLe6_XcRBRMq5w'
        self.dest_token = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ikg5bmo1QU9Tc3dNcGhnMVNGeDdqYVYtbEI5dyIsImtpZCI6Ikg5bmo1QU9Tc3dNcGhnMVNGeDdqYVYtbEI5dyJ9.eyJhdWQiOiJjZmE4YjMzOS04MmEyLTQ3MWEtYTNjOS0wZmMwYmU3YTQwOTMiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC9mOWYyNmFhMC1jOTBlLTQ0MzEtYWRkNC03NzQ5ZDk3YmE0MjAvIiwiaWF0IjoxNzI2MTA1MjY5LCJuYmYiOjE3MjYxMDUyNjksImV4cCI6MTcyNjEwOTU4NSwiYWNyIjoiMSIsImFpbyI6IkFWUUFxLzhYQUFBQWlBVnVVTjIrbnQ0aVpnNjEzZk9QWXlBWGRsVG0wTjRHS0hPS1IvRUxyVkQ5OTlwMjRseTE0SUd0ZzRqQlhSV2dzZkNFZFQzblJkK2VtbktWY0sxZmZUeUtSQjk0Sng4VjRsMUlVNVpKS0JnPSIsImFtciI6WyJwd2QiLCJyc2EiLCJtZmEiXSwiYXBwaWQiOiIwNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDYiLCJhcHBpZGFjciI6IjAiLCJkZXZpY2VpZCI6IjQ4OWQzMWM1LTM4ODUtNGVkYy1hNjc2LTY5NWE3ZDE0ZTA2OSIsImZhbWlseV9uYW1lIjoiWmhhbmciLCJnaXZlbl9uYW1lIjoiV2VpeGlhbiIsImdyb3VwcyI6WyI1NzhlNTA1Mi0xZmNmLTQ4YWUtYWYzMC1lOTVhODUwNzJiY2MiLCIwODM1OTE1My00NTRmLTRiMmEtYjIzZi04OWQxMWFmYzFjNjQiLCJjZjE0NzE1Yy04OGM3LTQ3MDItYjFjMy0zNTgzMzIwY2I2NzEiLCI2M2E3NGVhNS00ZmVlLTQyYzEtYjNiZS04YWVmMTc1MDY0NzciLCI3ZGM3MDcxZi1hOTZmLTQxNGUtODYzNy04MWRlYWFhNDBiMDYiXSwiaWR0eXAiOiJ1c2VyIiwiaXBhZGRyIjoiMjQwMDpkODAyOjJkZGM6YjQwMDpmODRlOjI1Mzg6OGIyMDo3NmQ1IiwibmFtZSI6IldlaXhpYW4iLCJvaWQiOiJhMmQ4MTAwMS03ODAyLTQ0ZWEtYTkzOC00OWYxMTkzOWIwMzUiLCJwdWlkIjoiMTAwMzIwMDMwMzVDNDAyNiIsInB3ZF91cmwiOiJodHRwczovL3BvcnRhbC5taWNyb3NvZnRvbmxpbmUuY29tL0NoYW5nZVBhc3N3b3JkLmFzcHgiLCJyaCI6IjAuQWIwQW9HcnktUTdKTVVTdDFIZEoyWHVrSURtenFNLWlnaHBIbzhrUHdMNTZRSlBMQUQ0LiIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6InZPUU5zcGU1eERnWmhpTWpfTHZjMEVQZnY4YlRHd2pfZmhXaHNKa2wzWW8iLCJ0aWQiOiJmOWYyNmFhMC1jOTBlLTQ0MzEtYWRkNC03NzQ5ZDk3YmE0MjAiLCJ1bmlxdWVfbmFtZSI6ImFkbWluQE1uZ0Vudk1DQVAwOTg0OTIub25taWNyb3NvZnQuY29tIiwidXBuIjoiYWRtaW5ATW5nRW52TUNBUDA5ODQ5Mi5vbm1pY3Jvc29mdC5jb20iLCJ1dGkiOiJSdkV0Q3FneGNFLXNZOXRxbWgxQ0FRIiwidmVyIjoiMS4wIiwid2lkcyI6WyI2MmU5MDM5NC02OWY1LTQyMzctOTE5MC0wMTIxNzcxNDVlMTAiLCI5Yjg5NWQ5Mi0yY2QzLTQ0YzctOWQwMi1hNmFjMmQ1ZWE1YzMiLCIxNThjMDQ3YS1jOTA3LTQ1NTYtYjdlZi00NDY1NTFhNmI1ZjciLCJjNGUzOWJkOS0xMTAwLTQ2ZDMtOGM2NS1mYjE2MGRhMDA3MWYiLCJiNzlmYmY0ZC0zZWY5LTQ2ODktODE0My03NmIxOTRlODU1MDkiXSwieG1zX2NjIjpbIkNQMSJdLCJ4bXNfZmlsdGVyX2luZGV4IjpbIjE4OSJdLCJ4bXNfaWRyZWwiOiIyNCAxIiwieG1zX3JkIjoiMC40MkxqWUJSaTJzc0lBQSIsInhtc19zc20iOiIxIn0.apVclIG1M6vqgAuF-e6BCet5qOMIsSCC8b_mbyKeSZfr6VDY9oEy0gSYUFy70ehqE9kCYOnWiRqERtdmBviqdwYyoc-5cIDKI34Kc3uuRr8CDzzfU1VdMHehnUA9c6x4-OA2i0MyL0VwtPxFlYFTqUomoL6CMTiY4QygABRU6o1Ek2zAZiByQAHukyLcCQ9_2rh9RAYL5G9QQGyZJGnaAC9qNhlK3F2A4gQAjaoGEp0U4xPZB1CALwuQ9tkBUoIxqZGxboUKpm2QEekcBrjrkC08FCo_nUo0sdAv7cNiO9I_k4M93YAHBop26qNr7V8YWNVpZiyj3a5vRm_Z6-mJdA'
        self._src_vault_name = 'akv-gccs'
        self.dest_vault_name = 'akv-temp-3'
        self.overwrite = False
        self.save_local = False
        self.also_save_local = True
        self.source_azure_cred = None
        self.dest_azure_cred = None

    def init_azure_cred(self):
        self.source_azure_cred = ExistingTokenCredential(self.src_token) #AzureCliCredential(tenant_id=self.src_tenant_id)
        self.dest_azure_cred =  ExistingTokenCredential(self.dest_token) #AzureCliCredential(tenant_id=self.dest_tenant_id)


    def get_src_vault_url(self):
        return f'https://{self._src_vault_name}.vault.azure.net'
    
    def get_dest_vault_url(self):
        return f'https://{self.dest_vault_name}.vault.azure.net'
